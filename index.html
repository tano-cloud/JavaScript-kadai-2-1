<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="utf-8">
    <title>FizzBuzz</title>
    <style type="text/css">
        @charset "UTF-8";

        /*
1-setting
*/
        /*htmlの開始*/
        html * {
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
        }

        ul {
            list-style: none;
        }
    </style>
</head>

<body>

    <h1>FizzBuzz問題</h1>

    <form>
        <p>
            <label>FizzNum:<input type="text" id="idFizzNum" value="" placeholder="整数値を入力してください"></label>
        </p>

        <p>
            <label>BuzzNum:<input type="text" id="idBuzzNum" value="" placeholder="整数値を入力してください"></label>
        </p>

        <button>実行</button>
    </form>

    <h2>【出力】</h2>

    <ul></ul>

    <script>


        'use strict';

        try {
            //ボタンをclickするとイベント開始
            document.querySelector('button').addEventListener('click', e => {

                //画面の遷移をキャンセル
                e.preventDefault();

                //ulノードの選択
                let ul = document.querySelector('ul');

                /*id名：idFizzNum、idBuzzNumのテキストﾎﾞｯｸｽ（input）
                に入力された値を それぞれ変数に格納*/
                let fizzNum = Number(document.getElementById('idFizzNum').value);
                let buzzNum = Number(document.getElementById('idBuzzNum').value);

                /*変数fizzNumとbuzzNumにユーザーに入力された値を格納し
                whileループ処理ごとに入力された値を再度加算する*/
                let fizzNumAdd = Number(fizzNum);
                let buzzNumAdd = Number(buzzNum);

                /*fizzNumAddとbuzzNumAddの値は、whileループ処理ごとに
                変数fizzNumArrとbuzzNumArrのリストに格納*/
                let fizzNumArr = [];
                let buzzNumArr = [];


                /*ユーザーに入力された値を、fizzNumArrとbuzzNumArrのリストに格納しつつ
                最後に同じ値分加算する処理を、それぞれ2ケタの値の間続ける
                */
                while (100 > fizzNumAdd) {
                    fizzNumArr.push(fizzNumAdd);
                    fizzNumAdd += fizzNum;
                }

                while (100 > buzzNumAdd) {
                    buzzNumArr.push(buzzNumAdd);
                    buzzNumAdd += buzzNum;
                }

                //変数fizzNumArrとbuzzNumArrの配列をマージする
                let concatArr = fizzNumArr.concat(buzzNumArr);


                //マージした配列に存在する複数の重複分を「全て」削除して一意の値にする
                concatArr = concatArr.filter(function (x, i, self) {
                    return self.indexOf(x) === i;
                });

                //マージして重複分を削除した配列の要素の個数を調べてconLengthに格納する
                let conLength = concatArr.length;



                //conLength分（要素の個数分）の処理を行う
                /*この処理でfizzNumに入力された値の倍数とbuzzNumに
                入力された値の倍数を小さい順に表示する*/

                for (let i = 0; i < conLength; i++) {

                    //配列の最小値を取得
                    let minNum = Math.min.apply(null, concatArr);

                    //一度表示した値を配列から削除する
                    let index = concatArr.indexOf(minNum);
                    concatArr.splice(index, 1);

                    //liノードを作成、使用したのちに空になる
                    var li = document.createElement('li');

                    //整数値であるかを確認し、違ったら処理せず"整数値を入力してください"と入力し
                    //ループを抜ける
                    if (true) {
                        let re = /[^0-9]+/;
                        let selectFizz = re.test(buzzNum);
                        let selectBuzz = re.test(fizzNum);

                        if (selectFizz === true || selectBuzz === true) {
                            li.textContent = `整数値を入力してください`;
                            ul.appendChild(li);
                            //ここ
                            break;
                        }

                    }

                    //fizzNumとbuzzNumで重複した値を出力
                    if (minNum % fizzNum === 0 && minNum % buzzNum === 0) {
                        li.textContent = `FizzBuzz ${minNum}`;
                        ul.appendChild(li);
                    }
                    //fizzNumの値を出力
                    else if (minNum % fizzNum === 0) {
                        li.textContent = `Fizz ${minNum}`;
                        ul.appendChild(li);

                    }
                    //buzzNumの値を出力
                    else if (minNum % buzzNum === 0) {
                        li.textContent = `Buzz ${minNum}`;
                        ul.appendChild(li);
                    }



                }





            });
        }
        //例外時に備える
        catch (e) {
            console.error(error);
        }


    </script>
</body>

</html>